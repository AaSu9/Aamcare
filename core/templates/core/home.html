{% extends 'core/base.html' %}
{% load static %}

{% block title %}AamCare - Your Gentle Guide to Motherhood{% endblock %}

{% block content %}
<style>
    /* Hero Section Enhancements */
    .hero-section {
        position: relative;
        padding: 160px 0 100px;
        overflow: hidden;
    }

    .hero-blob {
        position: absolute;
        filter: blur(80px);
        opacity: 0.6;
        z-index: -1;
        animation: blob-bounce 10s infinite ease-in-out alternate;
    }

    .blob-1 {
        top: -10%;
        right: -10%;
        width: 600px;
        height: 600px;
        background: rgba(79, 70, 229, 0.2);
        border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
    }

    .blob-2 {
        bottom: -10%;
        left: -10%;
        width: 500px;
        height: 500px;
        background: rgba(236, 72, 153, 0.2);
        border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        animation-delay: -5s;
    }

    @keyframes blob-bounce {
        0% {
            transform: translate(0, 0) scale(1);
        }

        100% {
            transform: translate(30px, 50px) scale(1.1);
        }
    }

    .hero-title {
        font-size: 4rem;
        font-weight: 800;
        line-height: 1.1;
        margin-bottom: 1.5rem;
        letter-spacing: -0.02em;
        background: linear-gradient(135deg, #1E293B 0%, #4F46E5 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }

    .hero-image-wrapper {
        position: relative;
        z-index: 2;
    }

    .hero-image {
        border-radius: 30px;
        box-shadow: 0 30px 60px -12px rgba(50, 50, 93, 0.25), 0 18px 36px -18px rgba(0, 0, 0, 0.3);
        transform: perspective(1000px) rotateY(-5deg) rotateX(2deg);
        transition: all 0.5s ease;
    }

    .hero-image:hover {
        transform: perspective(1000px) rotateY(0deg) rotateX(0deg) scale(1.02);
        box-shadow: 0 40px 70px -12px rgba(79, 70, 229, 0.3);
    }

    /* Floating Cards in Hero */
    .floating-card {
        padding: 1rem;
        background: white;
        border-radius: 16px;
        box-shadow: var(--shadow-md);
        position: absolute;
        z-index: 3;
        display: flex;
        align-items: center;
        gap: 1rem;
        animation: float-y 6s ease-in-out infinite;
    }

    .float-1 {
        top: 20%;
        left: -50px;
        animation-delay: 0s;
    }

    .float-2 {
        bottom: 15%;
        right: -30px;
        animation-delay: 2s;
    }

    @keyframes float-y {
        0%,
        100% {
            transform: translateY(0);
        }

        50% {
            transform: translateY(-20px);
        }
    }

    /* Feature Cards */
    .feature-card {
        background: white;
        border-radius: 24px;
        padding: 2.5rem;
        height: 100%;
        border: 1px solid rgba(0, 0, 0, 0.05);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        box-shadow: var(--shadow-sm);
    }

    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
        border-color: rgba(79, 70, 229, 0.1);
    }

    .icon-box {
        width: 70px;
        height: 70px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        margin-bottom: 1.5rem;
        transition: all 0.3s ease;
    }

    .feature-card:hover .icon-box {
        transform: scale(1.1) rotate(5deg);
    }

    /* Interactive Section */
    .interactive-demo {
        background: linear-gradient(135deg, #FFF0F5 0%, #F5F3FF 100%);
        border-radius: 40px;
        padding: 4rem;
        overflow: hidden;
        position: relative;
    }

    /* Stats Strip */
    .stats-strip {
        background: #1E293B;
        border-radius: 20px;
        padding: 3rem;
        color: white;
        margin-top: -50px;
        position: relative;
        z-index: 10;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
    }

    /* Testimonials Horizontal Scroll */
    .testimonial-scroll {
        display: flex;
        overflow-x: auto;
        gap: 2rem;
        padding: 2rem 1rem;
        scroll-snap-type: x mandatory;
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .testimonial-scroll::-webkit-scrollbar {
        display: none;
    }

    .testimonial-card-v2 {
        min-width: 350px;
        background: white;
        padding: 2rem;
        border-radius: 24px;
        scroll-snap-align: center;
        box-shadow: var(--shadow-sm);
        border: 1px solid #F1F5F9;
        transition: transform 0.3s ease;
    }

    .testimonial-card-v2:hover {
        transform: scale(1.02);
        border-color: var(--primary-light);
    }

    .highlight-text {
        color: var(--primary);
        font-weight: 700;
        position: relative;
        display: inline-block;
    }

    .highlight-text::after {
        content: '';
        position: absolute;
        bottom: 2px;
        left: 0;
        width: 100%;
        height: 8px;
        background: rgba(79, 70, 229, 0.2);
        z-index: -1;
        transform: skewX(-10deg);
    }

    /* Baby Size Widget */
    .baby-size-widget {
        background: white;
        padding: 2rem;
        border-radius: 24px;
        box-shadow: var(--shadow-md);
        text-align: center;
        max-width: 500px;
        margin: 0 auto;
    }

    .size-icon {
        font-size: 4rem;
        margin: 1rem 0;
        animation: size-pulse 2s infinite;
    }

    @keyframes size-pulse {
        0% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.1);
        }

        100% {
            transform: scale(1);
        }
    }

    /* Cartoon Avatar Styles */
    .cartoon-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        position: relative;
        overflow: hidden;
        border: 2px solid #fff;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .avatar-element {
        position: absolute;
    }

    .hair {
        width: 120%;
        height: 25px;
        top: -10px;
        left: -10%;
        border-radius: 50% 50% 0 0;
    }

    .face {
        width: 40px;
        height: 40px;
        background: #FFDBAC;
        border-radius: 50%;
        top: 10px;
        left: 5px;
    }

    .eyes {
        width: 6px;
        height: 6px;
        background: #333;
        border-radius: 50%;
        top: 20px;
        left: 15px;
    }

    .eyes::before {
        content: '';
        position: absolute;
        width: 6px;
        height: 6px;
        background: #333;
        border-radius: 50%;
        left: 15px;
    }

    .mouth {
        width: 15px;
        height: 5px;
        background: #E75480;
        border-radius: 0 0 50% 50%;
        top: 30px;
        left: 18px;
    }

    /* Dynamic avatar styles will be applied via JavaScript */
    .avatar-1 { background: linear-gradient(135deg, #FF9A9E 0%, #FAD0C4 100%); }
    .avatar-2 { background: linear-gradient(135deg, #A1C4FD 0%, #C2E9FB 100%); }
    .avatar-3 { background: linear-gradient(135deg, #FFECD2 0%, #FCB69F 100%); }
    .avatar-4 { background: linear-gradient(135deg, #84FAB0 0%, #8FD3F4 100%); }
</style>

<!-- Hero Section -->
<section class="hero-section">
    <div class="blob-1 hero-blob"></div>
    <div class="blob-2 hero-blob"></div>

    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-5 mb-lg-0 animate-on-scroll">
                <div
                    class="d-inline-flex align-items-center gap-2 px-3 py-1 rounded-pill bg-white shadow-sm mb-4 border border-1">
                    <span class="badge bg-primary rounded-pill">New</span>
                    <span class="small fw-bold text-dark">Trusted by 10,000+ Mothers in Nepal üá≥üáµ</span>
                </div>

                <h1 class="hero-title">
                    Your Gentle Guide to <span class="highlight-text">Motherhood</span>
                </h1>

                <p class="lead text-secondary mb-5" style="max-width: 90%;">
                    Experience a safe and healthy pregnancy with tailored care, expert health tracking, and a community
                    that understands you.
                </p>

                <div class="d-flex gap-3 flex-wrap">
                    <a href="{% url 'register_pregnant_woman' %}" class="btn btn-primary btn-lg px-5 py-3 shadow-lg">
                        <i class="fas fa-baby"></i> I'm Pregnant
                    </a>
                    <a href="{% url 'register_new_mother' %}" class="btn btn-secondary btn-lg px-5 py-3 shadow-lg">
                        <i class="fas fa-heart"></i> I'm a New Mom
                    </a>
                </div>

                <div class="mt-4 d-flex align-items-center gap-3">
                    <div class="d-flex position-relative">
                        <!-- Avatars -->
                        <img src="https://i.pravatar.cc/100?img=1" class="rounded-circle border border-2 border-white"
                            width="40" height="40" style="margin-right: -10px;">
                        <img src="https://i.pravatar.cc/100?img=5" class="rounded-circle border border-2 border-white"
                            width="40" height="40" style="margin-right: -10px;">
                        <img src="https://i.pravatar.cc/100?img=9" class="rounded-circle border border-2 border-white"
                            width="40" height="40" style="margin-right: -10px;">
                        <div class="rounded-circle bg-dark text-white d-flex align-items-center justify-content-center border border-2 border-white"
                            style="width: 40px; height: 40px; font-size: 0.8rem;">+2k</div>
                    </div>
                    <div>
                        <div class="d-flex text-warning small">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                                class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <small class="text-muted fw-bold">5.0 Star Rating</small>
                    </div>
                </div>
            </div>

            <div class="col-lg-6 hero-image-wrapper animate-on-scroll">
                <img src="{% static 'core/motherchild.png' %}" alt="Mother and Child" class="img-fluid hero-image">

                <!-- Floating Card 1 -->
                <div class="floating-card float-1">
                    <div class="rounded-circle bg-success bg-opacity-10 p-2 text-success">
                        <i class="fas fa-check-circle fa-lg"></i>
                    </div>
                    <div>
                        <small class="d-block text-muted">Vaccination</small>
                        <strong class="text-dark">Completed</strong>
                    </div>
                </div>

                <!-- Floating Card 2 -->
                <div class="floating-card float-2">
                    <div class="rounded-circle bg-danger bg-opacity-10 p-2 text-danger">
                        <i class="fas fa-heartbeat fa-lg"></i>
                    </div>
                    <div>
                        <small class="d-block text-muted">Heart Rate</small>
                        <strong class="text-dark">Normal</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<div class="container mb-5">
    <div class="stats-strip animate-on-scroll">
        <div class="row text-center g-4">
            <div class="col-md-4">
                <h2 class="display-6 fw-bold mb-0">15,000+</h2>
                <p class="text-white-50 mb-0">Active Users</p>
            </div>
            <div class="col-md-4 border-start border-end border-secondary">
                <h2 class="display-6 fw-bold mb-0">50+</h2>
                <p class="text-white-50 mb-0">Health Experts</p>
            </div>
            <div class="col-md-4">
                <h2 class="display-6 fw-bold mb-0">100%</h2>
                <p class="text-white-50 mb-0">Secure & Confidential</p>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<section class="py-5" id="features">
    <div class="container py-5">
        <div class="text-center mb-5 animate-on-scroll">
            <h6 class="text-primary fw-bold text-uppercase ls-2">Features</h6>
            <h2 class="display-5 fw-bold mb-3">Everything You Need</h2>
            <p class="text-muted mx-auto" style="max-width: 600px;">
                Comprehensive tools tailored for every step of your journey, designed by experts.
            </p>
        </div>

        <div class="row g-4">
            <!-- Card 1 -->
            <div class="col-md-4 animate-on-scroll">
                <div class="feature-card">
                    <div class="icon-box bg-indigo-100 text-primary" style="background: #E0E7FF;">
                        <i class="fas fa-columns"></i>
                    </div>
                    <h4>Smart Dashboard</h4>
                    <p class="text-muted">Get a personalized view of your health progress, upcoming appointments, and
                        daily tasks in one glance.</p>
                </div>
            </div>

            <!-- Card 2 -->
            <div class="col-md-4 animate-on-scroll">
                <div class="feature-card">
                    <div class="icon-box bg-pink-100 text-secondary" style="background: #FCE7F3;">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h4>Diet & Nutrition</h4>
                    <p class="text-muted">Custommeal plans enriched with essential vitamins and minerals for you and
                        your baby's growth.</p>
                </div>
            </div>

            <!-- Card 3 -->
            <div class="col-md-4 animate-on-scroll">
                <div class="feature-card">
                    <div class="icon-box bg-emerald-100 text-success" style="background: #D1FAE5;">
                        <i class="fas fa-syringe"></i>
                    </div>
                    <h4>Vaccine Tracker</h4>
                    <p class="text-muted">Never miss a shot. We track your immunization schedule and send timely
                        reminders automatically.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Interactive Widget Section -->
<section class="py-5">
    <div class="container animate-on-scroll">
        <div class="interactive-demo">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h2 class="fw-bold mb-4">How big is your baby? ü•ë</h2>
                    <p class="lead text-muted mb-4">Select your current week to see a fun size comparison!</p>

                    <div class="d-flex flex-wrap gap-2 mb-4">
                        <button class="btn btn-outline-primary rounded-pill week-btn active" data-week="8"
                            data-fruit="Raspberry" data-icon="üçá">Week 8</button>
                        <button class="btn btn-outline-primary rounded-pill week-btn" data-week="12" data-fruit="Plum"
                            data-icon="üçë">Week 12</button>
                        <button class="btn btn-outline-primary rounded-pill week-btn" data-week="20" data-fruit="Banana"
                            data-icon="üçå">Week 20</button>
                        <button class="btn btn-outline-primary rounded-pill week-btn" data-week="30"
                            data-fruit="Cabbage" data-icon="ü•¨">Week 30</button>
                        <button class="btn btn-outline-primary rounded-pill week-btn" data-week="40"
                            data-fruit="Watermelon" data-icon="üçâ">Week 40</button>
                    </div>
                </div>
                <div class="col-lg-6 text-center">
                    <div class="baby-size-widget">
                        <h3 class="fruit-name text-primary fw-bold">Raspberry</h3>
                        <div class="size-icon fruit-icon">üçá</div>
                        <p class="text-muted fruit-desc">Your baby is about the size of a Raspberry!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="py-5 bg-white">
    <div class="container py-5">
        <div class="text-center mb-5 animate-on-scroll">
            <h6 class="text-secondary fw-bold text-uppercase">Stories</h6>
            <h2 class="display-5 fw-bold">Moms Love AamCare</h2>
        </div>

        <div class="testimonial-scroll animate-on-scroll">
            {% for testimonial in featured_testimonials %}
            <div class="testimonial-card-v2">
                <div class="d-flex align-items-center mb-3">
                    <!-- Cartoon avatar with different colors for variety -->
                    {% cycle '1,2,3,4' as avatar_index %}
                    {% cycle '#8B4513,#000000,#8B4513,#4B0082' as hair_color %}
                    <div class="cartoon-avatar me-3 avatar-{{ avatar_index }}" data-hair-color="{{ hair_color }}">
                        <div class="avatar-element hair"></div>
                        <div class="avatar-element face"></div>
                        <div class="avatar-element eyes"></div>
                        <div class="avatar-element mouth"></div>
                    </div>
                    <div>
                        <h6 class="mb-0 fw-bold">{{ testimonial.user.first_name }} {{ testimonial.user.last_name }}</h6>
                        <small class="text-muted">{{ testimonial.village_district }}</small>
                    </div>
                </div>
                <p class="text-muted">"{{ testimonial.story|truncatewords:25 }}"</p>
                <div class="text-warning">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
            </div>
            {% empty %}
            <div class="testimonial-card-v2">
                <div class="d-flex align-items-center mb-3">
                    <div class="cartoon-avatar me-3 avatar-1" data-hair-color="#8B4513">
                        <div class="avatar-element hair"></div>
                        <div class="avatar-element face"></div>
                        <div class="avatar-element eyes"></div>
                        <div class="avatar-element mouth"></div>
                    </div>
                    <div>
                        <h6 class="mb-0 fw-bold">Sita Sharma</h6>
                        <small class="text-muted">Kathmandu</small>
                    </div>
                </div>
                <p class="text-muted">"The weekly updates helped me understand exactly what was happening to my body. I
                    felt so much calmer."</p>
                <div class="text-warning"><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                        class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
            </div>

            <div class="testimonial-card-v2">
                <div class="d-flex align-items-center mb-3">
                    <div class="cartoon-avatar me-3 avatar-2" data-hair-color="#000000">
                        <div class="avatar-element hair"></div>
                        <div class="avatar-element face"></div>
                        <div class="avatar-element eyes"></div>
                        <div class="avatar-element mouth"></div>
                    </div>
                    <div>
                        <h6 class="mb-0 fw-bold">Maya Gurung</h6>
                        <small class="text-muted">Pokhara</small>
                    </div>
                </div>
                <p class="text-muted">"As a new mom, the breastfeeding guide was a lifesaver. The community support is
                    also amazing."</p>
                <div class="text-warning"><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                        class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call To Action -->
<section class="py-5 position-relative overflow-hidden">
    <div class="container py-5 text-center animate-on-scroll">
        <div class="bg-dark text-white rounded-5 p-5 position-relative overflow-hidden">
            <div class="position-absolute top-0 start-0 w-100 h-100"
                style="background: linear-gradient(45deg, rgba(79, 70, 229, 0.4), rgba(236, 72, 153, 0.4));"></div>
            <div class="position-relative z-1">
                <h2 class="display-4 fw-bold mb-4">Start Your Journey Today</h2>
                <p class="lead text-light mb-5 mx-auto" style="max-width: 600px;">
                    Join thousands of mothers who are making their pregnancy journey safer and happier with AamCare.
                </p>
                <a href="{% url 'register_pregnant_woman' %}"
                    class="btn btn-light text-primary btn-lg fw-bold px-5 py-3 rounded-pill shadow-lg">
                    GET STARTED NOW
                </a>
            </div>
        </div>
    </div>
</section>

<script>
    // Baby Size Widget Logic
    document.addEventListener('DOMContentLoaded', function () {
        const buttons = document.querySelectorAll('.week-btn');
        const fruitName = document.querySelector('.fruit-name');
        const fruitIcon = document.querySelector('.fruit-icon');
        const fruitDesc = document.querySelector('.fruit-desc');

        buttons.forEach(btn => {
            btn.addEventListener('click', function () {
                // Update active state
                buttons.forEach(b => b.classList.remove('active', 'btn-primary'));
                buttons.forEach(b => b.classList.add('btn-outline-primary'));

                this.classList.remove('btn-outline-primary');
                this.classList.add('active', 'btn-primary');

                // Update Content
                const fruit = this.dataset.fruit;
                const icon = this.dataset.icon;

                fruitName.textContent = fruit;
                fruitIcon.textContent = icon;
                fruitDesc.textContent = `Your baby is about the size of a ${fruit}!`;

                // Retrigger animation
                fruitIcon.style.animation = 'none';
                fruitIcon.offsetHeight; /* trigger reflow */
                fruitIcon.style.animation = 'size-pulse 0.5s';
            });
        });

        // Apply hair colors to avatar elements
        const avatarElements = document.querySelectorAll('.cartoon-avatar');
        avatarElements.forEach(avatar => {
            const hairColor = avatar.getAttribute('data-hair-color');
            if (hairColor) {
                const hairElement = avatar.querySelector('.hair');
                if (hairElement) {
                    hairElement.style.background = hairColor;
                }
            }
        });
    });
</script>
{% endblock %}
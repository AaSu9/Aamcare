{% extends 'core/base.html' %}

{% block title %}Comprehensive Postpartum Nutrition{% endblock %}

{% block content %}
<div class="container-fluid my-5">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-gradient-success text-white">
                <div class="card-body text-center py-5">
                    <h1><i class="fas fa-baby me-3"></i>Comprehensive Postpartum & Breastfeeding Nutrition Guide</h1>
                    {% if is_mother %}
                        <p class="lead mb-2">Personalized nutrition for your postpartum recovery and breastfeeding journey</p>
                        <!-- <p class="mb-0">Baby's Birth Date: {{ profile.birth_date|date:"F j, Y" }}</p> -->
                    {% else %}
                        <p class="lead mb-0">Complete nutrition guidance for postpartum recovery and breastfeeding</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Child Details Section -->
    {% if is_mother %}
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-info shadow">
                <div class="card-header bg-info text-white">
                    <h4><i class="fas fa-baby me-2"></i>Child Details</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 text-center">
                            <div class="p-3 bg-light rounded">
                                <h6 class="text-info mb-1">Date of Birth</h6>
                                <p class="mb-0">{{ profile.child_birth_date|date:"F j, Y" }}</p>
                            </div>
                        </div>
                        <div class="col-md-2 text-center">
                            <div class="p-3 bg-light rounded">
                                <h6 class="text-info mb-1">Weight (kg)</h6>
                                <p class="mb-0">{% if child_details and child_details.weight_kg %}{{ child_details.weight_kg }}{% else %}<span class="text-muted">Not recorded</span>{% endif %}</p>
                            </div>
                        </div>
                        <div class="col-md-2 text-center">
                            <div class="p-3 bg-light rounded">
                                <h6 class="text-info mb-1">Height (cm)</h6>
                                <p class="mb-0">{% if child_details and child_details.height_cm %}{{ child_details.height_cm }}{% else %}<span class="text-muted">Not recorded</span>{% endif %}</p>
                            </div>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="p-3 bg-light rounded">
                                <h6 class="text-info mb-1">Head Circumference (cm)</h6>
                                <p class="mb-0">{% if child_details and child_details.head_circumference_cm %}{{ child_details.head_circumference_cm }}{% else %}<span class="text-muted">Not recorded</span>{% endif %}</p>
                            </div>
                        </div>
                        <div class="col-md-2 text-center">
                            <div class="p-3 bg-light rounded">
                                <h6 class="text-info mb-1">Feeding Status</h6>
                                <p class="mb-0">{% if child_details and child_details.feeding_status %}{{ child_details.feeding_status }}{% else %}<span class="text-muted">Not recorded</span>{% endif %}</p>
                            </div>
                        </div>
                    </div>
                    {% if child_details and child_details.checkup_date %}
                    <div class="text-end mt-2">
                        <small class="text-muted">Last updated: {{ child_details.checkup_date|date:"M j, Y H:i" }}</small>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Current Status Card -->
    {% if is_mother %}
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-success shadow">
                <div class="card-header bg-success text-white">
                    <h4><i class="fas fa-user-check me-2"></i>Your Postpartum Status</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 text-center">
                            <div class="p-3 bg-light rounded">
                                <h3 class="text-success mb-1">{{ postpartum_dates.weeks_since_birth }}</h3>
                                <p class="mb-0"><strong>Weeks Postpartum</strong></p>
                            </div>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="p-3 bg-light rounded">
                                <h3 class="text-info mb-1">{{ postpartum_dates.days_since_birth }}</h3>
                                <p class="mb-0"><strong>Days Postpartum</strong></p>
                            </div>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="p-3 bg-light rounded">
                                <h3 class="text-warning mb-1">{{ postpartum_dates.weeks_since_birth }}</h3>
                                <p class="mb-0"><strong>Baby's Age (Weeks)</strong></p>
                            </div>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="p-3 bg-light rounded">
                                <h3 class="text-primary mb-1">{{ postpartum_dates.months_since_birth }}</h3>
                                <p class="mb-0"><strong>Baby's Age (Months)</strong></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Postpartum Nutritional Requirements Table -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header bg-success text-white">
                    <h4><i class="fas fa-table me-2"></i>Postpartum Nutritional Requirements</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th><i class="fas fa-pills me-2"></i>Nutrient</th>
                                    <th><i class="fas fa-balance-scale me-2"></i>Amount Needed</th>
                                    <th><i class="fas fa-apple-alt me-2"></i>Best Food Sources</th>
                                    <th><i class="fas fa-info-circle me-2"></i>Benefits</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="table-warning">
                                    <td><strong>Calories</strong></td>
                                    <td><span class="badge bg-success">+500 kcal/day</span></td>
                                    <td>Rice, oats, potatoes, dal, ghee, milk</td>
                                    <td>Energy for recovery and milk production</td>
                                </tr>
                                <tr class="table-info">
                                    <td><strong>Protein</strong></td>
                                    <td><span class="badge bg-success">75–100g/day</span></td>
                                    <td>Eggs, chicken, paneer, milk, lentils</td>
                                    <td>Tissue repair and milk protein</td>
                                </tr>
                                <tr class="table-success">
                                    <td><strong>Calcium</strong></td>
                                    <td><span class="badge bg-success">1000–1300 mg/day</span></td>
                                    <td>Dairy, sesame, ragi, soy milk</td>
                                    <td>Bone health and milk calcium</td>
                                </tr>
                                <tr class="table-primary">
                                    <td><strong>Omega-3 DHA</strong></td>
                                    <td><span class="badge bg-success">Moderate intake</span></td>
                                    <td>Fish (low mercury), flaxseeds, walnuts</td>
                                    <td>Baby's brain development</td>
                                </tr>
                                <tr class="table-danger">
                                    <td><strong>Iron</strong></td>
                                    <td><span class="badge bg-success">15–18 mg/day</span></td>
                                    <td>Spinach, jaggery, meat, lentils</td>
                                    <td>Replenish blood loss</td>
                                </tr>
                                <tr class="table-secondary">
                                    <td><strong>Vitamin C</strong></td>
                                    <td><span class="badge bg-success">65–90 mg/day</span></td>
                                    <td>Oranges, guava, tomatoes, lemon</td>
                                    <td>Iron absorption and immunity</td>
                                </tr>
                                <tr class="table-light">
                                    <td><strong>Fluids</strong></td>
                                    <td><span class="badge bg-success">3 liters/day</span></td>
                                    <td>Water, soup, juice, herbal tea</td>
                                    <td>Milk production and hydration</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recovery Meal Plan -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header bg-info text-white">
                    <h4><i class="fas fa-clock me-2"></i>Postpartum Recovery Meal Plan</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header bg-warning text-dark">
                                    <h6><i class="fas fa-sun me-2"></i>Morning Meals</h6>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-coffee text-warning me-2"></i><strong>7-8 AM:</strong> Ragi porridge with milk and jaggery</li>
                                        <li><i class="fas fa-apple-alt text-warning me-2"></i><strong>10 AM:</strong> Fresh fruit + dry fruits + coconut water</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header bg-success text-white">
                                    <h6><i class="fas fa-cloud-sun me-2"></i>Afternoon Meals</h6>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-utensils text-success me-2"></i><strong>1-2 PM:</strong> Rice + dal + green vegetables + curd</li>
                                        <li><i class="fas fa-seedling text-success me-2"></i><strong>4-5 PM:</strong> Herbal tea + sprouts salad</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header bg-primary text-white">
                                    <h6><i class="fas fa-moon me-2"></i>Evening & Night</h6>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-bread-slice text-primary me-2"></i><strong>8-9 PM:</strong> Chapati + dal + vegetables</li>
                                        <li><i class="fas fa-mug-hot text-primary me-2"></i><strong>Before Bed:</strong> Warm milk with turmeric</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header bg-secondary text-white">
                                    <h6><i class="fas fa-star me-2"></i>Recovery Tips</h6>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i>Eat small, frequent meals</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Stay hydrated (3+ liters daily)</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Include protein in every meal</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Rest when possible</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Safe and Unsafe Medicines for Breastfeeding -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card shadow h-100">
                <div class="card-header bg-success text-white">
                    <h4><i class="fas fa-check-circle me-2"></i>Safe Medicines While Breastfeeding</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead class="table-success">
                                <tr>
                                    <th>Medicine</th>
                                    <th>Dosage</th>
                                    <th>Use</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Paracetamol</strong></td>
                                    <td>500 mg as needed</td>
                                    <td>Pain and fever relief</td>
                                </tr>
                                <tr>
                                    <td><strong>Calcium Supplements</strong></td>
                                    <td>1000-1300mg daily</td>
                                    <td>Bone health and milk production</td>
                                </tr>
                                <tr>
                                    <td><strong>Iron Supplements</strong></td>
                                    <td>30-60mg daily</td>
                                    <td>Replenish blood loss</td>
                                </tr>
                                <tr>
                                    <td><strong>Lactation Multivitamins</strong></td>
                                    <td>Once daily</td>
                                    <td>Overall nutrition support</td>
                                </tr>
                                <tr>
                                    <td><strong>Antacids</strong></td>
                                    <td>As needed</td>
                                    <td>Relief from acidity</td>
                                </tr>
                                <tr>
                                    <td><strong>Safe Antibiotics</strong></td>
                                    <td>As prescribed</td>
                                    <td>Doctor-approved only</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card shadow h-100">
                <div class="card-header bg-danger text-white">
                    <h4><i class="fas fa-times-circle me-2"></i>AVOID While Breastfeeding</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead class="table-danger">
                                <tr>
                                    <th>Substance</th>
                                    <th>Risk</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Strong Painkillers</strong></td>
                                    <td>Can pass to baby through milk</td>
                                </tr>
                                <tr>
                                    <td><strong>Anti-anxiety Meds</strong></td>
                                    <td>Affects baby's nervous system</td>
                                </tr>
                                <tr>
                                    <td><strong>Alcohol</strong></td>
                                    <td>Reduces milk production</td>
                                </tr>
                                <tr>
                                    <td><strong>Smoking</strong></td>
                                    <td>Reduces milk supply</td>
                                </tr>
                                <tr>
                                    <td><strong>Recreational Drugs</strong></td>
                                    <td>Harmful to baby's development</td>
                                </tr>
                                <tr>
                                    <td><strong>Unapproved Herbs</strong></td>
                                    <td>May affect milk quality</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Breastfeeding Tips -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4><i class="fas fa-baby me-2"></i>Breastfeeding Tips for Better Milk Production</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5 class="text-primary"><i class="fas fa-tint me-2"></i>For Better Milk Production:</h5>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><i class="fas fa-check text-success me-2"></i>Drink plenty of fluids (3+ liters daily)</li>
                                <li class="list-group-item"><i class="fas fa-check text-success me-2"></i>Eat protein-rich foods (eggs, dal, milk)</li>
                                <li class="list-group-item"><i class="fas fa-check text-success me-2"></i>Include galactagogues (fenugreek, fennel seeds)</li>
                                <li class="list-group-item"><i class="fas fa-check text-success me-2"></i>Rest when possible</li>
                                <li class="list-group-item"><i class="fas fa-check text-success me-2"></i>Breastfeed frequently (8-12 times daily)</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-success"><i class="fas fa-heart me-2"></i>Signs of Good Nutrition:</h5>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><i class="fas fa-baby text-info me-2"></i>Baby gains weight steadily</li>
                                <li class="list-group-item"><i class="fas fa-baby text-info me-2"></i>Baby has 6+ wet diapers daily</li>
                                <li class="list-group-item"><i class="fas fa-baby text-info me-2"></i>Baby is alert and active</li>
                                <li class="list-group-item"><i class="fas fa-baby text-info me-2"></i>Mother feels energetic</li>
                                <li class="list-group-item"><i class="fas fa-baby text-info me-2"></i>Milk supply is adequate</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Important Warning -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-warning border-warning">
                <h5><i class="fas fa-exclamation-triangle me-2"></i>Important Warning</h5>
                <p class="mb-0"><strong>Always consult your doctor before taking any medicine while breastfeeding.</strong> This guide is for informational purposes only and should not replace professional medical advice.</p>
            </div>
        </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="row">
        <div class="col-12 text-center">
            <a href="{% url 'breastfeeding_support' %}" class="btn btn-primary btn-lg me-3">
                <i class="fas fa-arrow-left me-2"></i>Back to Breastfeeding Support
            </a>
            {% if is_mother %}
            <a href="{% url 'mother_dashboard' %}" class="btn btn-success btn-lg">
                <i class="fas fa-home me-2"></i>Back to Dashboard
            </a>
            {% endif %}
        </div>
    </div>
</div>

<style>
.bg-gradient-success {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
}

.card-hover:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
}

.table th {
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.9rem;
}

.badge {
    font-size: 0.8rem;
    padding: 0.5em 0.8em;
}

.card-header h4, .card-header h6 {
    margin-bottom: 0;
}

.list-group-item {
    border-left: none;
    border-right: none;
}
</style>
{% endblock %} 